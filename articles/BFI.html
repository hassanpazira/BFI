<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="How to use the BFI package.
">
<title>An Introduction to BFI â€¢ BFI</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="An Introduction to BFI">
<meta property="og:description" content="How to use the BFI package.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary" data-bs-theme="default"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BFI</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/BFI.html">An Introduction to BFI</a>
    <a class="dropdown-item" href="../articles/Python.html">Calling BFI from Python</a>
    <a class="dropdown-item" href="../articles/SAS.html">Using BFI in SAS</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hassanpazira/BFI">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>An Introduction to BFI</h1>
                        <h4 data-toc-skip class="author">Hassan
Pazira</h4>
                        <h4 data-toc-skip class="author">Marianne
Jonker</h4>
            
            <h4 data-toc-skip class="date">2024-07-02</h4>
      
      
      <div class="d-none name"><code>BFI.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The R package <code>BFI</code> (<strong>B</strong>ayesian
<strong>F</strong>ederated <strong>I</strong>nference) provides several
functions to carry out the Bayesian Federated Inference method for two
types of models (<code>GLM</code> and <code>Survival</code>) using
multicenter data without the need to combine or share them. This
tutorial focuses on <code>GLM</code> models. Two commonly used families
for <code>GLM</code> models, <code>"binomial"</code> and
<code>"gaussian"</code>, are available for this version of the package.
The mostly using functions include <code><a href="../reference/BFI.html">bfi()</a></code>,
<code><a href="../reference/MAP.estimation.html">MAP.estimation()</a></code>, and <code><a href="../reference/inv.prior.cov.html">inv.prior.cov()</a></code>. In the
following, we will see how the <code>BFI</code> package can be applied
to real datasets included in the package.</p>
</div>
<div class="section level2">
<h2 id="how-to-use-it">How to use it?<a class="anchor" aria-label="anchor" href="#how-to-use-it"></a>
</h2>
<p>Before we go on, we first install and load the <code>BFI</code>
package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install and load the BFI package from CRAN:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BFI"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hassanpazira.github.io/BFI/">BFI</a></span><span class="op">)</span></span></code></pre></div>
<p>By using the following code, we can see that there are two available
datasets in the package: <code>trauma</code> and
<code>Nurses</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"BFI"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>trauma</code> dataset can be utilized for the
<code>"binomial"</code> family and <code>Nurses</code> dataset can be
used for <code>"gaussian"</code> family. To avoid repetition, we will
only use the <code>trauma</code> dataset. By loading the package, the
datasets included will be loaded and can be inspected as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the number of rows and columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 371   6</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To get an idea of the dataset, print the first 7 rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trauma</span>, <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   sex age hospital ISS GCS mortality</span></span>
<span><span class="co">## 1   1  20        3  24  15         0</span></span>
<span><span class="co">## 2   0  38        3  34  13         0</span></span>
<span><span class="co">## 3   0  37        3  50  15         0</span></span>
<span><span class="co">## 4   0  17        3  43   4         1</span></span>
<span><span class="co">## 5   0  49        3  29  15         0</span></span>
<span><span class="co">## 6   0  30        3  22  15         0</span></span>
<span><span class="co">## 7   1  84        2  66   3         1</span></span></code></pre>
<p>This dataset consists of data of 371 trauma patients from three
hospitals (peripheral hospital without a neuro-surgical unit,
<code>'status=1'</code>, peripheral hospital with a neuro-surgical unit,
<code>status=2</code>, and academic medical center,
<code>status=3</code>).</p>
<p>As we can see, it has 6 columns:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">col_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "sex"       "age"       "hospital"  "ISS"       "GCS"       "mortality"</span></span></code></pre>
<p>The covariates <code>sex</code> (dichotomous), <code>age</code>
(continuous), <code>ISS</code> (Injury Severity Score, continuous), and
<code>GCS</code> (Glasgow Coma Scale, continuous) are the predictors,
and <code>mortality</code> is the response variable.
<code>hospital</code> is a categorical variable which indicates the
hospitals involved in the study. For more information about this dataset
use</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get some info about the dataset from the help file</span></span>
<span><span class="op">?</span><span class="va">trauma</span></span></code></pre></div>
<p>We will analyse the data with a <code>logistic</code> regression
model. First we standardize the covariates. This is not necessary for
the analysis, but is done for the interpretability of the accuracy of
the estimates.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span><span class="op">)</span> </span>
<span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span><span class="op">)</span> </span>
<span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">)</span></span></code></pre></div>
<p>By using the following code we can see there are three hospitals
involved in the study:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 3</span></span></code></pre>
<p>Therefore the <code>MAP.estimation</code> function should be applied
on these 3 local datasets separately. Note that, in practice we do not
have access to the combined data, and each center should do the analysis
itself and send the output to the central server, like the
following:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Center 1:</span></span>
<span><span class="va">X1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                 age<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                 ISS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                 GCS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">Lambda1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inv.prior.cov.html">inv.prior.cov</a></span><span class="op">(</span><span class="va">X1</span>, lambda<span class="op">=</span><span class="fl">0.1</span>, L<span class="op">=</span><span class="fl">3</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MAP.estimation.html">MAP.estimation</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">mortality</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>, X<span class="op">=</span><span class="va">X1</span>, family<span class="op">=</span><span class="st">"binomial"</span>, Lambda<span class="op">=</span><span class="va">Lambda1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/summary.bfi.html">summary</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Summary of the model:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    Formula: y ~ sex + age + ISS + GCS </span></span>
<span><span class="co">##     Family: 'binomial' </span></span>
<span><span class="co">##       Link: 'Logit'</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Estimate Std.Dev CI 2.5% CI 97.5%</span></span>
<span><span class="co">## (Intercept)  -1.7550  0.6596 -3.0478  -0.4622</span></span>
<span><span class="co">## sex          -3.2086  1.7115 -6.5631   0.1459</span></span>
<span><span class="co">## age           1.4637  0.5265  0.4318   2.4956</span></span>
<span><span class="co">## ISS           1.7738  0.6488  0.5022   3.0455</span></span>
<span><span class="co">## GCS          -1.9583  0.6107 -3.1552  -0.7613</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Dispersion parameter (sigma2):  1 </span></span>
<span><span class="co">##             log Lik Posterior:  -12.15 </span></span>
<span><span class="co">##                   Convergence:  0</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Center 2:</span></span>
<span><span class="va">X2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>                 age<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>                 ISS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>                 GCS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">Lambda2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inv.prior.cov.html">inv.prior.cov</a></span><span class="op">(</span><span class="va">X2</span>, lambda<span class="op">=</span><span class="fl">0.1</span>, L<span class="op">=</span><span class="fl">3</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MAP.estimation.html">MAP.estimation</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">mortality</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span>, X<span class="op">=</span><span class="va">X2</span>, family<span class="op">=</span><span class="st">"binomial"</span>, Lambda<span class="op">=</span><span class="va">Lambda2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/summary.bfi.html">summary</a></span><span class="op">(</span><span class="va">fit2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Summary of the model:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    Formula: y ~ sex + age + ISS + GCS </span></span>
<span><span class="co">##     Family: 'binomial' </span></span>
<span><span class="co">##       Link: 'Logit'</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Estimate Std.Dev CI 2.5% CI 97.5%</span></span>
<span><span class="co">## (Intercept)  -0.7742  0.3695 -1.4984  -0.0500</span></span>
<span><span class="co">## sex          -0.7392  0.6755 -2.0632   0.5849</span></span>
<span><span class="co">## age           1.8974  0.4476  1.0201   2.7747</span></span>
<span><span class="co">## ISS           0.5197  0.3606 -0.1871   1.2265</span></span>
<span><span class="co">## GCS          -1.8203  0.3952 -2.5948  -1.0457</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Dispersion parameter (sigma2):  1 </span></span>
<span><span class="co">##             log Lik Posterior:  -37.25 </span></span>
<span><span class="co">##                   Convergence:  0</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Center 3:</span></span>
<span><span class="va">X3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">sex</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>                 age<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>                 ISS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>                 GCS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">Lambda3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inv.prior.cov.html">inv.prior.cov</a></span><span class="op">(</span><span class="va">X3</span>, lambda<span class="op">=</span><span class="fl">0.1</span>, L<span class="op">=</span><span class="fl">3</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MAP.estimation.html">MAP.estimation</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">mortality</span><span class="op">[</span><span class="va">trauma</span><span class="op">$</span><span class="va">hospital</span><span class="op">==</span><span class="fl">3</span><span class="op">]</span>, X<span class="op">=</span><span class="va">X3</span>, family<span class="op">=</span><span class="st">"binomial"</span>, Lambda<span class="op">=</span><span class="va">Lambda3</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/summary.bfi.html">summary</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Summary of the model:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##    Formula: y ~ sex + age + ISS + GCS </span></span>
<span><span class="co">##     Family: 'binomial' </span></span>
<span><span class="co">##       Link: 'Logit'</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             Estimate Std.Dev CI 2.5% CI 97.5%</span></span>
<span><span class="co">## (Intercept)  -2.2543  0.3858 -3.0104  -1.4981</span></span>
<span><span class="co">## sex           0.1354  0.5562 -0.9549   1.2256</span></span>
<span><span class="co">## age           1.2696  0.2869  0.7072   1.8320</span></span>
<span><span class="co">## ISS           0.3045  0.2599 -0.2049   0.8139</span></span>
<span><span class="co">## GCS          -2.3594  0.3954 -3.1344  -1.5844</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Dispersion parameter (sigma2):  1 </span></span>
<span><span class="co">##             log Lik Posterior:  -51.2 </span></span>
<span><span class="co">##                   Convergence:  0</span></span></code></pre>
<p>Then, only the outputs from the local centers (i.e.,
<code>fit1</code>,<code>fit2</code>, and <code>fit3</code>) should be
sent to the central server for further analysis. On the central server,
the <code><a href="../reference/BFI.html">bfi()</a></code> function can be used to obtain the BFI
estimations:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">theta_hats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">$</span><span class="va">theta_hat</span>, <span class="va">fit2</span><span class="op">$</span><span class="va">theta_hat</span>, <span class="va">fit3</span><span class="op">$</span><span class="va">theta_hat</span><span class="op">)</span></span>
<span><span class="va">A_hats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">$</span><span class="va">A_hat</span>, <span class="va">fit2</span><span class="op">$</span><span class="va">A_hat</span>, <span class="va">fit3</span><span class="op">$</span><span class="va">A_hat</span><span class="op">)</span></span>
<span><span class="va">Lambda_comb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inv.prior.cov.html">inv.prior.cov</a></span><span class="op">(</span><span class="va">X3</span>, lambda<span class="op">=</span><span class="fl">0.1</span>, L<span class="op">=</span><span class="fl">3</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="va">Lambdas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Lambda1</span>, <span class="va">Lambda2</span>, <span class="va">Lambda3</span>, <span class="va">Lambda_comb</span><span class="op">)</span></span>
<span><span class="va">BFI_fits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/BFI.html">bfi</a></span><span class="op">(</span><span class="va">theta_hats</span>,<span class="va">A_hats</span>,<span class="va">Lambdas</span><span class="op">)</span></span>
<span><span class="va">BFI_fits</span><span class="op">$</span><span class="va">theta_hat</span></span></code></pre></div>
<pre><code><span><span class="co">##      (Intercept)        sex      age       ISS       GCS</span></span>
<span><span class="co">## [1,]   -1.440543 -0.2868694 1.234282 0.5194158 -1.752476</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">X_combined</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sex<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">sex</span>,</span>
<span>                          age<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">age</span>,</span>
<span>                          ISS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">ISS</span>,</span>
<span>                          GCS<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">GCS</span><span class="op">)</span></span>
<span><span class="va">Lambda</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inv.prior.cov.html">inv.prior.cov</a></span><span class="op">(</span>X<span class="op">=</span><span class="va">X_combined</span>, lambda<span class="op">=</span><span class="fl">0.1</span>, L<span class="op">=</span><span class="fl">3</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span>
<span><span class="va">fit_comb</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MAP.estimation.html">MAP.estimation</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">trauma</span><span class="op">$</span><span class="va">mortality</span>, X<span class="op">=</span><span class="va">X_combined</span>, family<span class="op">=</span><span class="st">"binomial"</span>, Lambda<span class="op">=</span><span class="va">Lambda</span><span class="op">)</span> </span>
<span><span class="va">theta_comb</span> <span class="op">&lt;-</span> <span class="va">fit_comb</span><span class="op">$</span><span class="va">theta_hat</span></span>
<span><span class="va">A_hat_comb</span>    <span class="op">&lt;-</span> <span class="va">fit_comb</span><span class="op">$</span><span class="va">A_hat</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hassan Pazira, Emanuele Massa, Marianne A. Jonker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
