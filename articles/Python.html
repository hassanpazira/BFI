<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="How to use the BFI package in Python environments.
">
<title>Calling BFI from Python • BFI</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calling BFI from Python">
<meta property="og:description" content="How to use the BFI package in Python environments.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BFI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/BFI.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Python.html">Calling BFI from Python</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calling BFI from Python</h1>
            
            <h4 data-toc-skip class="date">2023-10-15</h4>
      
      
      <div class="d-none name"><code>Python.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>BFI</code> is an R package that performs Bayesian Federated
Inference (BFI) for linear, logistic, and Cox regression models. Since
there is no Python package for carrying out the BFI method so far, this
vignette describes the usage of the R package <code>BFI</code> in the
Python environment.</p>
</div>
<div class="section level2">
<h2 id="python-installation">Python Installation<a class="anchor" aria-label="anchor" href="#python-installation"></a>
</h2>
<p>The steps to install the latest version of Python on ‘MacOS’,
‘Ubuntu’ and ‘Windows’ are as follows:</p>
<div class="section level3">
<h3 id="on-macos">On MacOS<a class="anchor" aria-label="anchor" href="#on-macos"></a>
</h3>
<p>Open a terminal window (cmd + space and search ‘Terminal’) and
install the package manager ‘Homebrew’ by executing the following
command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span>bin<span class="sc">/</span>bash <span class="sc">-</span>c <span class="st">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"</span></span></code></pre></div>
<p>Install the latest version of Python (Python 3) with the following
command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>brew install python<span class="sc">@</span><span class="dv">3</span></span></code></pre></div>
<p>Verify the installation by checking the Python version:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">python3</span> <span class="op">-</span><span class="op">-</span><span class="va">version</span></span></code></pre></div>
<p>It’s assumed that R is also installed and configured on your system.
If not, the following can do it:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install XCode command-line tools</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>xcode<span class="sc">-</span>select <span class="sc">--</span>install</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install R</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>brew install <span class="sc">--</span>cask r</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="on-ubuntu">On Ubuntu<a class="anchor" aria-label="anchor" href="#on-ubuntu"></a>
</h3>
<p>Update package repositories and get latest package information by
running the following command in a terminal window:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get update <span class="sc">-</span>y</span></code></pre></div>
<p>Verify if Python is indeed installed on your system by the following
command:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">python3</span> <span class="op">-</span><span class="op">-</span><span class="va">version</span></span></code></pre></div>
<p>If you already have Python (Python 3) installed on your system, you
only need to upgrade it to the latest version as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get upgrade python3</span></code></pre></div>
<p>In case you did not have Python installed in the first place, the
latest version of Python can be installed using the following
command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install python3</span></code></pre></div>
<p>Verify the installation by checking the Python version:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">python3</span> <span class="op">-</span><span class="op">-</span><span class="va">version</span></span></code></pre></div>
<p>If you don’t have R installed and configured, just run the
following:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install R</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install r<span class="sc">-</span>base</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="on-windows">On Windows<a class="anchor" aria-label="anchor" href="#on-windows"></a>
</h3>
<p>By default, Python is usually not installed on Windows. However, you
can check if it exists on the system by running one line of command on
the command prompt. Go to <strong>Start</strong> and enter
<code>cmd</code> in the search bar, and then click <strong>Command
Prompt</strong>. Enter the command <code>python --version</code> or
<code>python3 --version</code> in the command prompt.</p>
<p>To download Python, go to the official Python download website for
Windows: <a href="https://www.python.org" class="external-link uri">https://www.python.org</a>. Find a stable Python 3 release,
and download the executable file for your system from the appropriate
link.</p>
<p>After the installer is downloaded, open/run the Python installer to
install Python. Select the <strong>Add Python 3.x to PATH</strong>
checkbox, which enables users to launch Python from the command line,
and then select <strong>Install Now</strong>.</p>
<p>Once the installation is complete, you can verify whether the Python
installation is successful through the command line. Enter the command
<code>python --version</code> or <code>python3 --version</code> in the
command prompt.</p>
<p>It’s assumed that R is also installed on your system. If you don’t
have R installed, just visit CRAN downloads (<a href="https://cran.r-project.org" class="external-link uri">https://cran.r-project.org</a>) and get the last
version.</p>
</div>
</div>
<div class="section level2">
<h2 id="installation-of-required-modules-through-pip">Installation of required modules through PIP<a class="anchor" aria-label="anchor" href="#installation-of-required-modules-through-pip"></a>
</h2>
<p>PIP (a Python package manager) helps us to install and use various
packages/modules in Python programming.</p>
<p>Install the latest version of PIP and required modules by running the
following commands on different systems.</p>
<div class="section level3">
<h3 id="on-macos-1">On MacOS<a class="anchor" aria-label="anchor" href="#on-macos-1"></a>
</h3>
<p>Install/Upgrade the latest version of PIP by running</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing PIP</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>python3 <span class="sc">-</span>m pip install <span class="sc">--</span>user <span class="sc">--</span>upgrade pip</span></code></pre></div>
<p>Install required modules by running the following commands</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'pandas' module</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>pip3 install pandas</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'numpy' module</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>pip3 install numpy</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'rpy2' module</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>pip3 install rpy2</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="on-ubuntu-1">On Ubuntu<a class="anchor" aria-label="anchor" href="#on-ubuntu-1"></a>
</h3>
<p>To install PIP use the code</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing PIP</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install python3<span class="sc">-</span>pip</span></code></pre></div>
<p>Verify you have successfully installed PIP by running</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pip3</span> <span class="op">-</span><span class="va">V</span></span></code></pre></div>
<p>Now, install required modules by typing the following commands</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'pandas' module</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>sudo pip3 install pandas</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'numpy' module</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>sudo pip3 install numpy</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'rpy2' module</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>sudo pip3 install rpy2</span></code></pre></div>
<p>If the lines above for installation of the modules did not install
them, use the following:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'pandas' module</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install python3<span class="sc">-</span>pandas</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'numpy' module</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install python3<span class="sc">-</span>numpy</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'rpy2' module</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>sudo apt<span class="sc">-</span>get install python3<span class="sc">-</span>rpy2</span></code></pre></div>
<p>Finally, use the show command to verify whether the module is now
part of your Python packages:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pip3 show pandas</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>pip3 show numpy</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>pip3 show rpy2</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="on-windows-1">On Windows<a class="anchor" aria-label="anchor" href="#on-windows-1"></a>
</h3>
<p>Usually, PIP is automatically installed if you are using Python
downloaded from <a href="https://www.python.org" class="external-link uri">https://www.python.org</a>. If you have followed the
previous steps provided in this vignette, then you have PIP installed on
your system. To check if PIP is already installed on Windows, you should
open the command line again, type <code>pip -V</code>, and press
<code>Enter</code>.</p>
<p>If PIP is not installed: First download <a href="https://bootstrap.pypa.io/get-pip.py" class="external-link">get-pip.py</a> to a folder
on your computer. Then, open a command prompt and navigate to the folder
containing the get-pip.py installer. Finally, run the following
command:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>python get<span class="sc">-</span>pip.py</span></code></pre></div>
<p>PIP should now be installed successfully. If we receive a ‘file not
found’ error, double check the directory path to the file. You can use
the <code>dir</code> command to view the entire contents of a directory.
More information can be found here: <a href="https://pip.pypa.io/en/stable/installation" class="external-link uri">https://pip.pypa.io/en/stable/installation</a>.</p>
<p>Now, install required modules by running the following commands:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'pandas' module</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>pip3 install pandas</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'numpy' module</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>pip3 install numpy</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'rpy2' module</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>pip3 install rpy2</span></code></pre></div>
<p>Now, you can start coding in Python using Python’s command-line
interpreter or IDLE application. Go to <code>Start</code> and enter
<code>python</code> in the search bar. You can see Python 3.x and IDLE
which can be used for coding. Open one of them and follow the following
steps.</p>
</div>
</div>
<div class="section level2">
<h2 id="python-script">
<code>Python</code> script<a class="anchor" aria-label="anchor" href="#python-script"></a>
</h2>
<p>It is assumed here that the required packages has been properly
installed. Now move on to work with the <code>rpy2</code> package inside
a Python script! First go to the Python Environment by typing the
following command in the terminal window:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">python3</span></span></code></pre></div>
<p>As of now, all the following codes should be run in the Python
environment.</p>
<div class="section level3">
<h3 id="importing-required-packages-and-functions">Importing required packages and functions<a class="anchor" aria-label="anchor" href="#importing-required-packages-and-functions"></a>
</h3>
<p>Use the following codes to import required Python modules:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import 'pandas' package</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># import 'numpy' package</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># import 'rpy2' package</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rpy2                  </span></code></pre></div>
<p>and using the following codes imports the required functions such as
<code>importr()</code> and <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2.robjects.packages <span class="im">import</span> importr, data</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2.robjects.vectors <span class="im">import</span> StrVector</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2.robjects <span class="im">import</span> numpy2ri, pandas2ri</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># activation of the automatic conversion of 'numpy' and 'pandas' objects into rpy2 objects</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>numpy2ri.activate()   </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>pandas2ri.activate()</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installation-of-r-packages-from-cran-and-github">Installation of <code>R</code> packages from CRAN and GitHub:<a class="anchor" aria-label="anchor" href="#installation-of-r-packages-from-cran-and-github"></a>
</h3>
<p>First load the packages preinstalled with R using
<code>importr()</code> as follows:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import R's "utils" package</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>utils <span class="op">=</span> importr(<span class="st">'utils'</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># import R's "base" package</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> importr(<span class="st">'base'</span>)</span></code></pre></div>
<p>Then install the R packages <code>stats</code> and
<code>devtools</code> from CRAN by typing</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>utils.chooseCRANmirror(ind<span class="op">=</span><span class="dv">1</span>)  <span class="co"># which selects the first mirror in the list</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>package_names <span class="op">=</span> (<span class="st">'stats'</span>, <span class="st">'devtools'</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>utils.install_packages(StrVector(package_names))</span></code></pre></div>
<p>Now load the installed packages using</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> importr(<span class="st">'stats'</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>devtools <span class="op">=</span> importr(<span class="st">'devtools'</span>)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installing-the-bfi-package-from-github">Installing the <code>BFI</code> package from GitHub<a class="anchor" aria-label="anchor" href="#installing-the-bfi-package-from-github"></a>
</h3>
<p>The <code>BFI</code> package can be installed and loaded using the
following lines:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing the 'BFI' package</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>devtools.install_github(<span class="st">"hassanpazira/BFI"</span>, force <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading the package</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>BFI <span class="op">=</span> importr(<span class="st">'BFI'</span>)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Now we generate two datasets independently from Gaussian
distribution, and then apply main functions in the <code>BFI</code>
package to these datasets:</p>
<div class="section level3">
<h3 id="data-simulation-for-center-1">Data Simulation for center 1<a class="anchor" aria-label="anchor" href="#data-simulation-for-center-1"></a>
</h3>
<p>Randomly generate 30 samples from Gaussian distribution with 3
covariates:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model parameters: 'theta' and 'p' are assumed to be the same for both centers:</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>theta <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="fl">0.75</span>])   <span class="co"># intercept is theta[0], sigma2 is theta[4]</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="dv">3</span>     <span class="co"># number of regression parameters without intercept</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Center 1:</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>n1 <span class="op">=</span> <span class="dv">30</span>   <span class="co"># sample size of center 1</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> np.random.normal(size<span class="op">=</span>(n1, p)) </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>X1.shape   <span class="co"># dimension of X1</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> pd.DataFrame(X1, columns<span class="op">=</span>[<span class="st">'X1'</span>, <span class="st">'X2'</span>, <span class="st">'X3'</span>])</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>mu1 <span class="op">=</span> theta[<span class="dv">0</span>] <span class="op">+</span> np.dot(X1, np.delete(theta, [<span class="dv">0</span>, <span class="dv">4</span>]))  <span class="co"># for gaussian: \eta = \mu </span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> pandas2ri.py2rpy(X1)   <span class="co"># == base.as_data_frame(X1)</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> np.random.normal(loc<span class="op">=</span>mu1, scale<span class="op">=</span>np.sqrt(theta[<span class="dv">4</span>]))</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-simulation-for-center-2">Data Simulation for center 2<a class="anchor" aria-label="anchor" href="#data-simulation-for-center-2"></a>
</h3>
<p>Generate randomly 50 samples from Gaussian distribution with 3
covariates:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Center 2:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>n2 <span class="op">=</span> <span class="dv">50</span>   <span class="co"># sample size of center 2</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> np.random.normal(size<span class="op">=</span>(n2, p))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> pd.DataFrame(X2, columns<span class="op">=</span>[<span class="st">'X1'</span>, <span class="st">'X2'</span>, <span class="st">'X3'</span>])</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>mu2 <span class="op">=</span> theta[<span class="dv">0</span>] <span class="op">+</span> np.dot(X2, np.delete(theta, [<span class="dv">0</span>, <span class="dv">4</span>]))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> pandas2ri.py2rpy(X2)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> np.random.normal(loc<span class="op">=</span>mu2, scale<span class="op">=</span>np.sqrt(theta[<span class="dv">4</span>]))</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="map-estimates-at-center-1">MAP estimates at center 1<a class="anchor" aria-label="anchor" href="#map-estimates-at-center-1"></a>
</h3>
<p>The following compute the Maximum A Posterior (MAP) estimators of the
parameters for center 1:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating an inverse covariance matrix for a Gaussian prior for center 1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>Lambda1 <span class="op">=</span> BFI.inv_prior_cov(X1, <span class="fl">0.01</span>, <span class="st">'gaussian'</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>fit1 <span class="op">=</span> BFI.MAP_estimation(y1, X1, <span class="st">'gaussian'</span>, Lambda1)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fit1)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>theta_hat1 <span class="op">=</span> fit1.rx2(<span class="st">"theta_hat"</span>) <span class="co"># MAP estimates of the intercept and coefficients</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>A_hat1 <span class="op">=</span> fit1.rx2(<span class="st">"A_hat"</span>)         <span class="co"># minus the curvature matrix</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>summary_1 <span class="op">=</span> BFI.summary_bfi(fit1, cur_mat <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="map-estimates-at-center-2">MAP estimates at center 2<a class="anchor" aria-label="anchor" href="#map-estimates-at-center-2"></a>
</h3>
<p>Obtaining the MAP estimators of the parameters for center 2 using the
following:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating an inverse covariance matrix for Gaussian prior for center 2</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>Lambda2 <span class="op">=</span> BFI.inv_prior_cov(X2, <span class="fl">0.01</span>, <span class="st">'gaussian'</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># MAP estimates</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>fit2 <span class="op">=</span> BFI.MAP_estimation(y2, X2, <span class="st">'gaussian'</span>, Lambda2)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>theta_hat2 <span class="op">=</span> fit2.rx2(<span class="st">"theta_hat"</span>) <span class="co"># MAP estimates of the parameters</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>A_hat2 <span class="op">=</span> fit2.rx2(<span class="st">"A_hat"</span>)         <span class="co"># minus the curvature matrix around 'theta_hat2'</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>summary_2 <span class="op">=</span> BFI.summary_bfi(fit2, cur_mat <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bfi-at-central-center">BFI at central center<a class="anchor" aria-label="anchor" href="#bfi-at-central-center"></a>
</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>theta_hats <span class="op">=</span> base.<span class="bu">list</span>(theta_hat1, theta_hat2)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>A_hats <span class="op">=</span> base.<span class="bu">list</span>(A_hat1, A_hat2)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>Lambda1 <span class="op">=</span> pd.DataFrame(Lambda1, index<span class="op">=</span>fit1.rx2(<span class="st">"names"</span>), columns<span class="op">=</span>fit1.rx2(<span class="st">"names"</span>))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>Lambda2 <span class="op">=</span> pd.DataFrame(Lambda2, index<span class="op">=</span>fit2.rx2(<span class="st">"names"</span>), columns<span class="op">=</span>fit2.rx2(<span class="st">"names"</span>))</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>Lambdas <span class="op">=</span> base.<span class="bu">list</span>(Lambda1, Lambda2)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>fit_bfi <span class="op">=</span> BFI.bfi(theta_hats, A_hats, Lambdas)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fit_bfi)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>summary_bfi <span class="op">=</span> BFI.summary_bfi(fit_bfi, cur_mat <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="datasets-included-in-the-bfi-package">Datasets included in the <code>BFI</code> package<a class="anchor" aria-label="anchor" href="#datasets-included-in-the-bfi-package"></a>
</h3>
<p>To find a list of all datasets included in the package run:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(utils.data(package <span class="op">=</span> <span class="st">"BFI"</span>))</span></code></pre></div>
<p>In order to use the datasets available from the <code>BFI</code>
package, use the following codes:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Nurses <span class="op">=</span> data(BFI).fetch(<span class="st">'Nurses'</span>)[<span class="st">'Nurses'</span>]  <span class="co"># is equivalent to BFI::Nurses in R</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(base.dim(Nurses)) <span class="co"># dimension of the data </span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Nurses.colnames)  <span class="co"># colnames of the data</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>trauma <span class="op">=</span> data(BFI).fetch(<span class="st">'trauma'</span>)[<span class="st">'trauma'</span>]  <span class="co"># is equivalent to BFI::trauma in R</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(base.dim(trauma)) <span class="co"># dimension of the data </span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(trauma.colnames)  <span class="co"># colnames of the data</span></span></code></pre></div>
<p>At the end, use the following to deactivate automatic conversion:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>numpy2ri.deactivate()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>pandas2ri.deactivate()</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hassan Pazira, Marianne A. Jonker, Anthony C.C. Coolen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
